[{"content":"step1 启用并配置 Goldmark passthrough 扩展，在站点配置文件\nmarkup: goldmark: extensions: passthrough: delimiters: block: - - \\[ - \\] - - $$ - $$ inline: - - \\( - \\) enable: true params: math: true 作用是：\n定义block和inline两种类型的标记，使用配置的标记将公式包括进去，允许自己选择，允许不配置block或者inline 添加了一个params，在之后会使用 step2 在themes目录下你的主题中添加 layouts/_partials/math.html 文件\n\u0026lt;script id=\u0026#34;MathJax-script\u0026#34; async src=\u0026#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; MathJax = { tex: { displayMath: [[\u0026#39;\\\\[\u0026#39;, \u0026#39;\\\\]\u0026#39;], [\u0026#39;$$\u0026#39;, \u0026#39;$$\u0026#39;]], // block inlineMath: [[\u0026#39;\\\\(\u0026#39;, \u0026#39;\\\\)\u0026#39;]] // inline }, loader:{ load: [\u0026#39;ui/safe\u0026#39;] }, }; \u0026lt;/script\u0026gt; 符号需要和step1的配置匹配\nstep3 根据参数条件调用partial template，PaperMod的位置在 themes/PaperMod/layouts/_default/baseof.html 其他主题搜索 baseof.html 文件\n\u0026lt;head\u0026gt; ... {{ if .Param \u0026#34;math\u0026#34; }} {{ partialCached \u0026#34;math.html\u0026#34; . }} {{ end }} ... \u0026lt;/head\u0026gt; step4 验证，对应应当如下\nThis is an inline \\(a^*=x-b^*\\) equation. These are block equations: \\[a^*=x-b^*\\] \\[ a^*=x-b^* \\] \\[ a^*=x-b^* \\] These are also block equations: $$a^*=x-b^*$$ $$ a^*=x-b^* $$ $$ a^*=x-b^* $$ 参考： https://gohugo.io/content-management/mathematics/\n","permalink":"https://blog.bocchi.icu/posts/hugo_mathjax/","summary":"\u003ch1 id=\"step1\"\u003estep1\u003c/h1\u003e\n\u003cp\u003e启用并配置 Goldmark passthrough 扩展，在站点配置文件\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003emarkup\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003egoldmark\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"nt\"\u003eextensions\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nt\"\u003epassthrough\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e\u003cspan class=\"nt\"\u003edelimiters\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"nt\"\u003eblock\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e- - \u003cspan class=\"l\"\u003e\\[\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e            \u003c/span\u003e- \u003cspan class=\"l\"\u003e\\]\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e- - \u003cspan class=\"l\"\u003e$$\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e            \u003c/span\u003e- \u003cspan class=\"l\"\u003e$$\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"nt\"\u003einline\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e          \u003c/span\u003e- - \u003cspan class=\"l\"\u003e\\(\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e            \u003c/span\u003e- \u003cspan class=\"l\"\u003e\\)\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e        \u003c/span\u003e\u003cspan class=\"nt\"\u003eenable\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"nt\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nt\"\u003emath\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e作用是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e定义block和inline两种类型的标记，使用配置的标记将公式包括进去，允许自己选择，允许不配置block或者inline\u003c/li\u003e\n\u003cli\u003e添加了一个params，在之后会使用\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"step2\"\u003estep2\u003c/h1\u003e\n\u003cp\u003e在themes目录下你的主题中添加 \u003ccode\u003elayouts/_partials/math.html\u003c/code\u003e 文件\u003c/p\u003e","title":"在hugo站点中添加mathjax支持"},{"content":"在conda环境下安装依赖 CUDA 参考\n编译环境和图像处理库 conda install -c conda-forge cmake pkg-config -y #需要指定版本，编译时可能需要 conda install -c conda-forge gcc=11.4.0 gxx=11.4.0 gcc_linux-64=11.4.0 gxx_linux-64=11.4.0 -y conda install -c conda-forge numpy -y conda install -c conda-forge libjpeg-turbo libpng libtiff libwebp libavif -y conda install -c conda-forge eigen ffmpeg libgl ocl-icd-system -y conda install -c conda-forge hdf5 openblas lapack -y conda install -c conda-forge tbb vtk tesseract -y conda install -c conda-forge matplotlib scipy scikit-learn scikit-image -y conda install -c conda-forge libstdcxx-ng libgcc-ng libarchive -y conda install -c conda-forge gstreamer gst-plugins-base gst-plugins-good gst-plugins-bad gst-plugins-ugly gst-libav -y conda install -c conda-forge libgfortran ncurses -y conda install -c conda-forge x264 x265 jasper openexr -y conda install -c conda-forge qt -y #需要指定版本，编译时可能需要 conda install -c conda-forge libgfortran=3 -y 编译 # 拉取源码 git clone https://github.com/opencv/opencv_contrib.git git clone https://github.com/opencv/opencv.git # checkout特定版本，上述参数测试可用于4.8.1 cd opencv \u0026amp;\u0026amp; git checkout 4.8.1 \u0026amp;\u0026amp; cd .. cd opencv_contrib \u0026amp;\u0026amp; git checkout 4.8.1 \u0026amp;\u0026amp; cd .. # （可选）使用编解码硬件加速需要 cp Video_Codec_SDK_13.0.19/Interface/* $CONDA_PREFIX/include/ cp Video_Codec_SDK_13.0.19/Lib/linux/stubs/x86_64/* $CONDA_PREFIX/lib/ # 创建输出目录 mkdir build \u0026amp;\u0026amp; cd build 编译指令 # 配置编译参数 cmake .. \\ -D CMAKE_BUILD_TYPE=RELEASE \\ -D CMAKE_INSTALL_PREFIX=$CONDA_PREFIX \\ -D CMAKE_INSTALL_RPATH=$CONDA_PREFIX/lib \\ -D CMAKE_INSTALL_RPATH_USE_LINK_PATH=ON \\ -D CMAKE_SKIP_RPATH=OFF \\ -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules \\ -D WITH_CUDA=ON \\ -D CUDA_ARCH_BIN=\u0026#34;8.9\u0026#34; \\ -D CUDA_HOST_COMPILER=$(which gcc) \\ -D CMAKE_CUDA_COMPILER=$(which nvcc) \\ -D CUDA_TOOLKIT_ROOT_DIR=$CONDA_PREFIX \\ -D WITH_CUDNN=ON \\ -D OPENCV_DNN_CUDA=ON \\ -D ENABLE_FAST_MATH=ON \\ -D CUDA_FAST_MATH=ON \\ -D WITH_CUBLAS=ON \\ -D BUILD_opencv_python3=ON \\ -D PYTHON3_EXECUTABLE=$CONDA_PREFIX/bin/python \\ -D PYTHON3_INCLUDE_DIR=$CONDA_PREFIX/include/python3.12 \\ -D PYTHON3_LIBRARY=$CONDA_PREFIX/lib/libpython3.12.so \\ -D PYTHON3_NUMPY_INCLUDE_DIRS=$CONDA_PREFIX/lib/python3.12/site-packages/numpy/_core/include \\ -D PYTHON3_PACKAGES_PATH=$CONDA_PREFIX/lib/python3.12/site-packages \\ -D WITH_GSTREAMER=ON \\ -D WITH_FFMPEG=ON \\ -D BUILD_opencv_python2=OFF \\ -D BUILD_TESTS=OFF \\ -D BUILD_PERF_TESTS=OFF \\ -D ENABLE_CCACHE=OFF \\ -D ENABLE_CUDA_FIRST_CLASS_LANGUAGE=ON \\ # 编译安装 # 根据cpu核心数调整参数 make -j 12 # 安装 make install 验证安装 import cv2 print(cv2.__version__) print(cv2.cuda.getCudaEnabledDeviceCount()) PROBLEMS 缺少libcuda* 文件 ln -sf /usr/lib/x86_64-linux-gnu/libcuda* $CONDA_PREFIX/lib/ 缺少libstdc++.so.6 ln -sf /usr/lib64/libstdc++.so.6 /home/hjk/miniconda3/lib/libstdc++.so.6 其他可能解决方案 conda install libarchive ","permalink":"https://blog.bocchi.icu/posts/opencv_cuda/","summary":"\u003ch1 id=\"在conda环境下安装依赖\"\u003e在conda环境下安装依赖\u003c/h1\u003e\n\u003ch2 id=\"cuda\"\u003eCUDA\u003c/h2\u003e\n\u003cp\u003e参考\u003c/p\u003e\n\u003ch2 id=\"编译环境和图像处理库\"\u003e编译环境和图像处理库\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge cmake pkg-config -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e#需要指定版本，编译时可能需要\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge \u003cspan class=\"nv\"\u003egcc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e11.4.0 \u003cspan class=\"nv\"\u003egxx\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e11.4.0 gcc_linux-64\u003cspan class=\"o\"\u003e=\u003c/span\u003e11.4.0 gxx_linux-64\u003cspan class=\"o\"\u003e=\u003c/span\u003e11.4.0 -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge numpy -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge libjpeg-turbo libpng libtiff libwebp libavif -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge eigen ffmpeg libgl ocl-icd-system -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge hdf5 openblas lapack -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge tbb vtk tesseract -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge matplotlib scipy scikit-learn scikit-image -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge libstdcxx-ng libgcc-ng libarchive -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge gstreamer gst-plugins-base gst-plugins-good gst-plugins-bad gst-plugins-ugly gst-libav -y \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge libgfortran ncurses -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge x264 x265 jasper openexr -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge qt -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e#需要指定版本，编译时可能需要\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install -c conda-forge \u003cspan class=\"nv\"\u003elibgfortran\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e -y\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"编译\"\u003e编译\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 拉取源码\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit clone https://github.com/opencv/opencv_contrib.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egit clone https://github.com/opencv/opencv.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# checkout特定版本，上述参数测试可用于4.8.1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e opencv \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e git checkout 4.8.1 \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003ecd\u003c/span\u003e .. \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e opencv_contrib \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e git checkout 4.8.1 \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003ecd\u003c/span\u003e ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# （可选）使用编解码硬件加速需要\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecp Video_Codec_SDK_13.0.19/Interface/* \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/include/\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecp Video_Codec_SDK_13.0.19/Lib/linux/stubs/x86_64/* \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib/\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 创建输出目录\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkdir build \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003ecd\u003c/span\u003e build\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"编译指令\"\u003e编译指令\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 配置编译参数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecmake .. \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_BUILD_TYPE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eRELEASE \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_INSTALL_PREFIX\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_INSTALL_RPATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_INSTALL_RPATH_USE_LINK_PATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_SKIP_RPATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eOFF \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eOPENCV_EXTRA_MODULES_PATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e../../opencv_contrib/modules \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eWITH_CUDA\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCUDA_ARCH_BIN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;8.9\u0026#34;\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCUDA_HOST_COMPILER\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003ewhich gcc\u003cspan class=\"k\"\u003e)\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCMAKE_CUDA_COMPILER\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003ewhich nvcc\u003cspan class=\"k\"\u003e)\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCUDA_TOOLKIT_ROOT_DIR\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eWITH_CUDNN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eOPENCV_DNN_CUDA\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eENABLE_FAST_MATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eCUDA_FAST_MATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eWITH_CUBLAS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eBUILD_opencv_python3\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003ePYTHON3_EXECUTABLE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/bin/python \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003ePYTHON3_INCLUDE_DIR\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/include/python3.12 \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003ePYTHON3_LIBRARY\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib/libpython3.12.so \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003ePYTHON3_NUMPY_INCLUDE_DIRS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib/python3.12/site-packages/numpy/_core/include \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003ePYTHON3_PACKAGES_PATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib/python3.12/site-packages \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eWITH_GSTREAMER\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eWITH_FFMPEG\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eBUILD_opencv_python2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eOFF \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eBUILD_TESTS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eOFF \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eBUILD_PERF_TESTS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eOFF \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eENABLE_CCACHE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eOFF \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e  -D \u003cspan class=\"nv\"\u003eENABLE_CUDA_FIRST_CLASS_LANGUAGE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eON \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 编译安装\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 根据cpu核心数调整参数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emake -j \u003cspan class=\"m\"\u003e12\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 安装\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emake install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"验证安装\"\u003e验证安装\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ecv2\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e__version__\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecv2\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecuda\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egetCudaEnabledDeviceCount\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"problems\"\u003ePROBLEMS\u003c/h1\u003e\n\u003ch2 id=\"缺少libcuda-文件\"\u003e缺少libcuda* 文件\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eln -sf /usr/lib/x86_64-linux-gnu/libcuda* \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"缺少libstdcso6\"\u003e缺少libstdc++.so.6\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eln -sf /usr/lib64/libstdc++.so.6 /home/hjk/miniconda3/lib/libstdc++.so.6\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"其他可能解决方案\"\u003e其他可能解决方案\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install libarchive\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"编译支持CUDA加速的opencv"},{"content":"安装miniconda mkdir -p ~/miniconda3 wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3 rm ~/miniconda3/miniconda.sh source ~/miniconda3/bin/activate conda init --all 在conda环境内安装cuda-toolkit conda install nvidia/label/cuda-12.4.1::cuda-toolkit -y conda install nvidia/label/cuda-12.4.1::cuda-nvcc -y conda install cudnn cuda-version=12.4 -c nvidia -y conda install nvidia/label/cuda-12.4.1::cuda-cudart -y conda install nvidia/label/cuda-12.4.1::libcublas -y conda install nvidia/label/cuda-12.4.1::libnpp -y conda install nvidia/label/cuda-12.4.1::cuda-opencl -y conda install nvidia/label/cuda-12.4.1::libcufft -y # 自动设置环境变量 mkdir -p $CONDA_PREFIX/etc/conda/activate.d echo \u0026#34;export PATH=$CONDA_PREFIX/bin:\\$PATH\u0026#34; \u0026gt;\u0026gt; $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh echo \u0026#34;export LD_LIBRARY_PATH=$CONDA_PREFIX/lib:\\$LD_LIBRARY_PATH\u0026#34; \u0026gt;\u0026gt; $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh echo \u0026#34;export CUDA_HOME=$CONDA_PREFIX\u0026#34; \u0026gt;\u0026gt; $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh # 对应cuda版本 pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124 # https://pytorch.org/get-started/previous-versions/ 验证 nvcc -V （可选）安装TensorRT pip3 install --upgrade tensorrt echo \u0026#34;export LD_LIBRARY_PATH=$CONDA_PREFIX/lib/python3.12/site-packages/tensorrt_libs:\\$LD_LIBRARY_PATH\u0026#34; \u0026gt;\u0026gt; $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh ","permalink":"https://blog.bocchi.icu/posts/cuda_in_conda_env/","summary":"\u003ch1 id=\"安装miniconda\"\u003e安装miniconda\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkdir -p ~/miniconda3\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ewget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ebash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erm ~/miniconda3/miniconda.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003esource\u003c/span\u003e ~/miniconda3/bin/activate\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda init --all\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"在conda环境内安装cuda-toolkit\"\u003e在conda环境内安装cuda-toolkit\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::cuda-toolkit -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::cuda-nvcc -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install cudnn cuda-version\u003cspan class=\"o\"\u003e=\u003c/span\u003e12.4 -c nvidia -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::cuda-cudart -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::libcublas -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::libnpp -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::cuda-opencl -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econda install nvidia/label/cuda-12.4.1::libcufft -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 自动设置环境变量\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkdir -p \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/etc/conda/activate.d\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;export PATH=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e\u003cspan class=\"s2\"\u003e/bin:\\$PATH\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/etc/conda/activate.d/env_vars.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;export LD_LIBRARY_PATH=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e\u003cspan class=\"s2\"\u003e/lib:\\$LD_LIBRARY_PATH\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/etc/conda/activate.d/env_vars.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;export CUDA_HOME=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/etc/conda/activate.d/env_vars.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# 对应cuda版本\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# https://pytorch.org/get-started/previous-versions/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"验证\"\u003e验证\u003c/h1\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003envcc -V\n\u003c/code\u003e\u003c/pre\u003e\u003ch1 id=\"可选安装tensorrt\"\u003e（可选）安装TensorRT\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epip3 install --upgrade tensorrt\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;export LD_LIBRARY_PATH=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e\u003cspan class=\"s2\"\u003e/lib/python3.12/site-packages/tensorrt_libs:\\$LD_LIBRARY_PATH\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"nv\"\u003e$CONDA_PREFIX\u003c/span\u003e/etc/conda/activate.d/env_vars.sh\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"在conda环境下安装和管理CUDA版本"},{"content":"","permalink":"https://blog.bocchi.icu/pages/about/","summary":"","title":""}]